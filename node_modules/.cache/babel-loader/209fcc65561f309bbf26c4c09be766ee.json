{"ast":null,"code":"var _jsxFileName = \"/Users/tmg/Desktop/burger/src/pages/App/index.js\";\nimport React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport css from \"./style.module.css\";\nimport Toolbar from \"../../components/Toolbar\";\nimport BurgerPage from \"../BurgerPage\";\nimport SideBar from \"../../components/SideBar\";\nimport OrderPage from \"../OrderPage\";\nimport { Route, Switch } from \"react-router-dom\";\nimport ShippingPage from \"../ShippingPage\";\nimport Burger from \"../../components/Burger\";\nimport LoginPage from \"../LoginPage\";\nimport SignupPage from \"../SignupPage\";\nimport Logout from \"../../components/Logout\";\nimport * as actions from \"../../redux/actions/loginActions\";\nimport * as signupActions from \"../../redux/actions/signupActions\";\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      showSidebar: false\n    };\n\n    this.toggleSideBar = () => {\n      this.setState(prevState => {\n        return {\n          showSidebar: !prevState.showSidebar\n        };\n      });\n    };\n\n    this.componentDidMount = () => {\n      const token = localStorage.getItem(\"token\");\n      const userId = localStorage.getItem(\"userId\");\n      const expireDate = new Date(localStorage.getItem(\"expireDate\"));\n      const refreshToken = localStorage.getItem(\"refreshToken\");\n\n      if (token) {\n        if (expireDate > new Date()) {\n          // Hugatsaa n duusaaagui token baina, avtomat login hiine\n          this.props.autoLogin(token, userId); // Token huchingui bolohod uldej baigaa hugatsaag tootsoolj\n          // Ter hugatsaanii daraa avtomataar logout hiine\n\n          this.props.autoLogoutAfterMillisec(expireDate.getTime() - new Date().getTime());\n        } else {\n          // Token hugatsaa n duussan bainaa, logout hiine\n          this.props.logout();\n        }\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(Toolbar, {\n      toggleSideBar: this.toggleSideBar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }), React.createElement(SideBar, {\n      showSidebar: this.state.showSidebar,\n      toggleSideBar: this.toggleSideBar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(\"main\", {\n      className: css.Content,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, this.props.userId ? React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/logout\",\n      component: Logout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/orders\",\n      component: OrderPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/ship\",\n      component: ShippingPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/\",\n      component: BurgerPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    })) : React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Route, {\n      path: \"/signup\",\n      component: SignupPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/login\",\n      component: LoginPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(Redirect, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    userId: state.signupReducer.userId\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    autoLogin: (token, userId) => dispatch(actions.loginUserSuccess(token, userId)),\n    logout: () => dispatch(signupActions.logout()),\n    autoLogoutAfterMillisec: () => dispatch(signupActions.autoLogoutAfterMillisec())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);","map":{"version":3,"sources":["/Users/tmg/Desktop/burger/src/pages/App/index.js"],"names":["React","Component","Redirect","connect","css","Toolbar","BurgerPage","SideBar","OrderPage","Route","Switch","ShippingPage","Burger","LoginPage","SignupPage","Logout","actions","signupActions","App","state","showSidebar","toggleSideBar","setState","prevState","componentDidMount","token","localStorage","getItem","userId","expireDate","Date","refreshToken","props","autoLogin","autoLogoutAfterMillisec","getTime","logout","render","Content","mapStateToProps","signupReducer","mapDispatchToProps","dispatch","loginUserSuccess"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport css from \"./style.module.css\";\n\nimport Toolbar from \"../../components/Toolbar\";\nimport BurgerPage from \"../BurgerPage\";\nimport SideBar from \"../../components/SideBar\";\nimport OrderPage from \"../OrderPage\";\nimport { Route, Switch } from \"react-router-dom\";\nimport ShippingPage from \"../ShippingPage\";\nimport Burger from \"../../components/Burger\";\nimport LoginPage from \"../LoginPage\";\nimport SignupPage from \"../SignupPage\";\nimport Logout from \"../../components/Logout\";\nimport * as actions from \"../../redux/actions/loginActions\";\nimport * as signupActions from \"../../redux/actions/signupActions\";\n\nclass App extends Component {\n  state = {\n    showSidebar: false\n  };\n\n  toggleSideBar = () => {\n    this.setState(prevState => {\n      return { showSidebar: !prevState.showSidebar };\n    });\n  };\n\n  componentDidMount = () => {\n    const token = localStorage.getItem(\"token\");\n    const userId = localStorage.getItem(\"userId\");\n    const expireDate = new Date(localStorage.getItem(\"expireDate\"));\n    const refreshToken = localStorage.getItem(\"refreshToken\");\n\n    if (token) {\n      if (expireDate > new Date()) {\n        // Hugatsaa n duusaaagui token baina, avtomat login hiine\n        this.props.autoLogin(token, userId);\n        // Token huchingui bolohod uldej baigaa hugatsaag tootsoolj\n        // Ter hugatsaanii daraa avtomataar logout hiine\n        this.props.autoLogoutAfterMillisec(\n          expireDate.getTime() - new Date().getTime()\n        );\n      } else {\n        // Token hugatsaa n duussan bainaa, logout hiine\n        this.props.logout();\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <Toolbar toggleSideBar={this.toggleSideBar} />\n\n        <SideBar\n          showSidebar={this.state.showSidebar}\n          toggleSideBar={this.toggleSideBar}\n        />\n\n        <main className={css.Content}>\n          {this.props.userId ? (\n            <Switch>\n              <Route path=\"/logout\" component={Logout} />\n              <Route path=\"/orders\" component={OrderPage} />\n              <Route path=\"/ship\" component={ShippingPage} />\n              <Route path=\"/\" component={BurgerPage} />\n            </Switch>\n          ) : (\n            <Switch>\n              <Route path=\"/signup\" component={SignupPage} />\n              <Route path=\"/login\" component={LoginPage} />\n              <Redirect to=\"/login\" />\n            </Switch>\n          )}\n        </main>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    userId: state.signupReducer.userId\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    autoLogin: (token, userId) =>\n      dispatch(actions.loginUserSuccess(token, userId)),\n    logout: () => dispatch(signupActions.logout()),\n    autoLogoutAfterMillisec: () =>\n      dispatch(signupActions.autoLogoutAfterMillisec())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n"]},"metadata":{},"sourceType":"module"}