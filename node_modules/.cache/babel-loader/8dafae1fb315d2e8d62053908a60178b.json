{"ast":null,"code":"import axios from \"axios\";\nimport { loginUserSuccess } from \"./loginActions\";\nexport const signupUser = (email, password) => {\n  return function (dispatch) {\n    dispatch(signupUserStart());\n    const data = {\n      email,\n      password,\n      returnSecureToken: true\n    };\n    axios.post(\"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAGYZclO0f7wIfrpUxl70JiaGiNpxUecb8\", data).then(result => {\n      // LocalStorage ruu hadgalna\n      const token = result.data.idToken;\n      const userId = result.data.localId;\n      localStorage.setItem(\"token\", token);\n      localStorage.setItem(\"userId\", userId);\n      dispatch(signupUserSuccess(token, userId));\n    }).catch(err => {\n      dispatch(signupUserError(err));\n    });\n  };\n};\nexport const signupUserStart = () => {\n  return {\n    type: \"SIGNUP_USER_START\"\n  };\n};\nexport const signupUserSuccess = (token, userId) => {\n  return {\n    type: \"SIGNUP_USER_SUCCESS\",\n    token,\n    userId\n  };\n};\nexport const signupUserError = error => {\n  return {\n    type: \"SIGNUP_USER_ERROR\",\n    error\n  };\n};\nexport const logout = () => {\n  localStorage.removeItem(\"token\");\n  localStorage.removeItem(\"userId\");\n  localStorage.removeItem(\"expireDate\");\n  localStorage.removeItem(\"refreshToken\");\n  return {\n    type: \"LOGOUT\"\n  };\n};\nexport const autoLogoutAfterMillisec = ms => {\n  return function (dispatch) {\n    // token shinechleh code\n    // axios\n    //   .post(\n    //     \"https://securetoken.googleapis.com/v1/token?key=AIzaSyCEmDZW6k2XJlQritKoYeJG14ExYa1rRSM\",\n    //     {\n    //       grant_type: \"refresh_token\",\n    //       refresh_token: localStorage.get(\"refresh_token\")\n    //     }\n    //   )\n    //   .then(result => {\n    //     const token = result.data.id_token;\n    //     const userId = result.data.user_id;\n    //     const token = result.data.idToken;\n    //     const userId = result.data.localId;\n    //     const expiresIn = result.data.expiresIn;\n    //     const expireDate = new Date(new Date().getTime() + expiresIn * 1000);\n    //     const refreshToken = result.data.refreshToken;\n    //     localStorage.setItem(\"token\", token);\n    //     localStorage.setItem(\"userId\", userId);\n    //     localStorage.setItem(\"expireDate\", expireDate);\n    //     localStorage.setItem(\"refreshToken\", refreshToken);\n    //     dispatch(loginUserSuccess(token, userId));\n    //   })\n    //   .catch(err => {\n    //     dispatch(signupUserError(err));\n    //   });\n    // avtomat logout\n    setTimeout(() => {\n      dispatch(logout());\n    }, ms);\n  };\n};","map":{"version":3,"sources":["/Users/tmg/Desktop/burger/src/redux/actions/signupActions.js"],"names":["axios","loginUserSuccess","signupUser","email","password","dispatch","signupUserStart","data","returnSecureToken","post","then","result","token","idToken","userId","localId","localStorage","setItem","signupUserSuccess","catch","err","signupUserError","type","error","logout","removeItem","autoLogoutAfterMillisec","ms","setTimeout"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,gBAAT,QAAiC,gBAAjC;AACA,OAAO,MAAMC,UAAU,GAAG,CAACC,KAAD,EAAQC,QAAR,KAAqB;AAC7C,SAAO,UAAUC,QAAV,EAAoB;AACzBA,IAAAA,QAAQ,CAACC,eAAe,EAAhB,CAAR;AAEA,UAAMC,IAAI,GAAG;AACXJ,MAAAA,KADW;AAEXC,MAAAA,QAFW;AAGXI,MAAAA,iBAAiB,EAAE;AAHR,KAAb;AAMAR,IAAAA,KAAK,CACFS,IADH,CAEI,uGAFJ,EAGIF,IAHJ,EAKGG,IALH,CAKSC,MAAD,IAAY;AAChB;AACA,YAAMC,KAAK,GAAGD,MAAM,CAACJ,IAAP,CAAYM,OAA1B;AACA,YAAMC,MAAM,GAAGH,MAAM,CAACJ,IAAP,CAAYQ,OAA3B;AAEAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BL,KAA9B;AACAI,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BH,MAA/B;AAEAT,MAAAA,QAAQ,CAACa,iBAAiB,CAACN,KAAD,EAAQE,MAAR,CAAlB,CAAR;AACD,KAdH,EAeGK,KAfH,CAeUC,GAAD,IAAS;AACdf,MAAAA,QAAQ,CAACgB,eAAe,CAACD,GAAD,CAAhB,CAAR;AACD,KAjBH;AAkBD,GA3BD;AA4BD,CA7BM;AA+BP,OAAO,MAAMd,eAAe,GAAG,MAAM;AACnC,SAAO;AACLgB,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMJ,iBAAiB,GAAG,CAACN,KAAD,EAAQE,MAAR,KAAmB;AAClD,SAAO;AACLQ,IAAAA,IAAI,EAAE,qBADD;AAELV,IAAAA,KAFK;AAGLE,IAAAA;AAHK,GAAP;AAKD,CANM;AAQP,OAAO,MAAMO,eAAe,GAAIE,KAAD,IAAW;AACxC,SAAO;AACLD,IAAAA,IAAI,EAAE,mBADD;AAELC,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,MAAMC,MAAM,GAAG,MAAM;AAC1BR,EAAAA,YAAY,CAACS,UAAb,CAAwB,OAAxB;AACAT,EAAAA,YAAY,CAACS,UAAb,CAAwB,QAAxB;AACAT,EAAAA,YAAY,CAACS,UAAb,CAAwB,YAAxB;AACAT,EAAAA,YAAY,CAACS,UAAb,CAAwB,cAAxB;AACA,SAAO;AACLH,IAAAA,IAAI,EAAE;AADD,GAAP;AAGD,CARM;AAUP,OAAO,MAAMI,uBAAuB,GAAIC,EAAD,IAAQ;AAC7C,SAAO,UAAUtB,QAAV,EAAoB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACAuB,IAAAA,UAAU,CAAC,MAAM;AACfvB,MAAAA,QAAQ,CAACmB,MAAM,EAAP,CAAR;AACD,KAFS,EAEPG,EAFO,CAAV;AAGD,GAhCD;AAiCD,CAlCM","sourcesContent":["import axios from \"axios\";\r\nimport { loginUserSuccess } from \"./loginActions\";\r\nexport const signupUser = (email, password) => {\r\n  return function (dispatch) {\r\n    dispatch(signupUserStart());\r\n\r\n    const data = {\r\n      email,\r\n      password,\r\n      returnSecureToken: true,\r\n    };\r\n\r\n    axios\r\n      .post(\r\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAGYZclO0f7wIfrpUxl70JiaGiNpxUecb8\",\r\n        data\r\n      )\r\n      .then((result) => {\r\n        // LocalStorage ruu hadgalna\r\n        const token = result.data.idToken;\r\n        const userId = result.data.localId;\r\n\r\n        localStorage.setItem(\"token\", token);\r\n        localStorage.setItem(\"userId\", userId);\r\n\r\n        dispatch(signupUserSuccess(token, userId));\r\n      })\r\n      .catch((err) => {\r\n        dispatch(signupUserError(err));\r\n      });\r\n  };\r\n};\r\n\r\nexport const signupUserStart = () => {\r\n  return {\r\n    type: \"SIGNUP_USER_START\",\r\n  };\r\n};\r\n\r\nexport const signupUserSuccess = (token, userId) => {\r\n  return {\r\n    type: \"SIGNUP_USER_SUCCESS\",\r\n    token,\r\n    userId,\r\n  };\r\n};\r\n\r\nexport const signupUserError = (error) => {\r\n  return {\r\n    type: \"SIGNUP_USER_ERROR\",\r\n    error,\r\n  };\r\n};\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem(\"token\");\r\n  localStorage.removeItem(\"userId\");\r\n  localStorage.removeItem(\"expireDate\");\r\n  localStorage.removeItem(\"refreshToken\");\r\n  return {\r\n    type: \"LOGOUT\",\r\n  };\r\n};\r\n\r\nexport const autoLogoutAfterMillisec = (ms) => {\r\n  return function (dispatch) {\r\n    // token shinechleh code\r\n    // axios\r\n    //   .post(\r\n    //     \"https://securetoken.googleapis.com/v1/token?key=AIzaSyCEmDZW6k2XJlQritKoYeJG14ExYa1rRSM\",\r\n    //     {\r\n    //       grant_type: \"refresh_token\",\r\n    //       refresh_token: localStorage.get(\"refresh_token\")\r\n    //     }\r\n    //   )\r\n    //   .then(result => {\r\n    //     const token = result.data.id_token;\r\n    //     const userId = result.data.user_id;\r\n    //     const token = result.data.idToken;\r\n    //     const userId = result.data.localId;\r\n    //     const expiresIn = result.data.expiresIn;\r\n    //     const expireDate = new Date(new Date().getTime() + expiresIn * 1000);\r\n    //     const refreshToken = result.data.refreshToken;\r\n    //     localStorage.setItem(\"token\", token);\r\n    //     localStorage.setItem(\"userId\", userId);\r\n    //     localStorage.setItem(\"expireDate\", expireDate);\r\n    //     localStorage.setItem(\"refreshToken\", refreshToken);\r\n    //     dispatch(loginUserSuccess(token, userId));\r\n    //   })\r\n    //   .catch(err => {\r\n    //     dispatch(signupUserError(err));\r\n    //   });\r\n\r\n    // avtomat logout\r\n    setTimeout(() => {\r\n      dispatch(logout());\r\n    }, ms);\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}